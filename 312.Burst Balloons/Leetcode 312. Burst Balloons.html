<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/><meta name="exporter-version" content="Evernote Mac 7.2.1 (456793)"/><meta name="author" content="271957751@qq.com"/><meta name="created" content="2019-01-26 06:57:32 +0000"/><meta name="source" content="desktop.mac"/><meta name="updated" content="2019-01-26 06:57:41 +0000"/><title>Leetcode 312. Burst Balloons</title></head><body><div><span style="font-family: &quot;Helvetica Neue&quot;; font-size: 18px;">Leetcode </span><span style="letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; font-family: &quot;Helvetica Neue&quot;; font-size: 18px; color: rgb(33, 33, 33); font-variant-caps: normal; font-variant-ligatures: normal;">312</span><span style="letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); font-family: &quot;Helvetica Neue&quot;; font-size: 18px; color: rgb(33, 33, 33); font-variant-caps: normal; font-variant-ligatures: normal;">. </span><span style="letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; font-family: &quot;Helvetica Neue&quot;; font-size: 18px; color: rgb(33, 33, 33); font-variant-caps: normal; font-variant-ligatures: normal;">Burst Balloons</span></div><div><span style="color: rgb(33, 33, 33); font-family: &quot;Helvetica Neue&quot;; font-size: 18px;">使用动态规划</span></div><div><span style="font-family: &quot;Helvetica Neue&quot;; color: rgb(33, 33, 33); font-size: 18px;">思路：定义二维数组dp[][] , 令dp[i][j] 表示 『在不击破编号为i和j的气球的情况下，击破编号i到j的所有气球所能获得的最大分数』，此题核心的状态方程式是 ：</span></div><div><span style="font-family: &quot;Helvetica Neue&quot;; color: rgb(33, 33, 33); font-size: 18px;">dp[i][j] = num[k]*num[i]*num[j] + dp[i][k] + dp[k][j] , 其中 i&lt;k&lt;j ，且k为『</span><span style="font-family: &quot;Helvetica Neue&quot;; color: rgb(33, 33, 33); font-size: 18px;">在不击破编号为i和j的气球的情况下，</span><span style="font-family: &quot;Helvetica Neue&quot;; color: rgb(33, 33, 33); font-size: 18px;">击破编号i到j的所有气球中的最后一个气球后取得了最大值</span><span style="font-family: &quot;Helvetica Neue&quot;; color: rgb(33, 33, 33); font-size: 18px;">』时的那个气球编号，也就是说，最后击破了编号为k的气球，并且取得了整个过程的最大分数，那么在计算的时候需要挨个比较最大值，所以也可以写成这样：</span></div><div><span style="color: rgb(33, 33, 33); font-family: &quot;Helvetica Neue&quot;; font-size: 18px;">dp[i][j] = max(num[k]*num[i]*num[j] + dp[i][k] + dp[k][j]) , i&lt;k&lt;j ，注意这次对k没有其他限制（因为max函数就蕴含了取得了最大值这个思想）,  所以如果给定了编号1~n的气球序列，我们就是要求dp[0][n+1]，这里0号和n+1号为虚拟出来方便解题的气球</span></div><div><span style="color: rgb(33, 33, 33); font-family: &quot;Helvetica Neue&quot;; font-size: 18px;">具体为何是这样的算法，可以从如下角度理解：</span></div><div><span style="font-size: 18px; font-family: &quot;Helvetica Neue&quot;; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(0, 0, 0); font-variant-caps: normal; font-variant-ligatures: normal; line-height: 23.8px;-en-paragraph:true;">假设最后（倒数第一）打爆了编号</span><span style="font-size: 18px; font-family: &quot;Helvetica Neue&quot;; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(0, 0, 0); font-variant-caps: normal; font-variant-ligatures: normal; line-height: 23.8px;-en-paragraph:true;">k</span><span style="font-size: 18px; font-family: &quot;Helvetica Neue&quot;; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(0, 0, 0); font-variant-caps: normal; font-variant-ligatures: normal; line-height: 23.8px;-en-paragraph:true;">气球并获得了最大分数，那么最终最大分数</span><span style="font-size: 18px; font-family: &quot;Helvetica Neue&quot;; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(0, 0, 0); font-variant-caps: normal; font-variant-ligatures: normal; line-height: 23.8px;-en-paragraph:true;"> </span><span style="font-size: 18px; font-family: &quot;Helvetica Neue&quot;; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(0, 0, 0); font-variant-caps: normal; font-variant-ligatures: normal; line-height: 23.8px;-en-paragraph:true;">= dp[0][n+1] = num[k]*num[0]*num[n+1] + </span><span style="font-size: 18px; font-family: &quot;Helvetica Neue&quot;; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(0, 0, 0); font-variant-caps: normal; font-variant-ligatures: normal; line-height: 23.8px;-en-paragraph:true;">击破倒数第二个气球所得分数</span><span style="font-size: 18px; font-family: &quot;Helvetica Neue&quot;; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(0, 0, 0); font-variant-caps: normal; font-variant-ligatures: normal; line-height: 23.8px;-en-paragraph:true;"> + </span><span style="font-size: 18px; font-family: &quot;Helvetica Neue&quot;; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(0, 0, 0); font-variant-caps: normal; font-variant-ligatures: normal; line-height: 23.8px;-en-paragraph:true;">击破倒数第三个气球所得分数</span><span style="font-size: 18px; font-family: &quot;Helvetica Neue&quot;; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(0, 0, 0); font-variant-caps: normal; font-variant-ligatures: normal; line-height: 23.8px;-en-paragraph:true;"> +  </span><span style="font-size: 18px; font-family: &quot;Helvetica Neue&quot;; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(0, 0, 0); font-variant-caps: normal; font-variant-ligatures: normal; line-height: 23.8px;-en-paragraph:true;">……</span></div><div style="letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><span style="letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); font-size: 18px; font-family: &quot;Helvetica Neue&quot;; color: rgb(0, 0, 0); font-variant-caps: normal; font-variant-ligatures: normal; line-height: 23.8px;-en-paragraph:true;">此时，编号为</span><span style="letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); font-size: 18px; font-family: &quot;Helvetica Neue&quot;; color: rgb(0, 0, 0); font-variant-caps: normal; font-variant-ligatures: normal; line-height: 23.8px;-en-paragraph:true;">k</span><span style="letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); font-size: 18px; font-family: &quot;Helvetica Neue&quot;; color: rgb(0, 0, 0); font-variant-caps: normal; font-variant-ligatures: normal; line-height: 23.8px;-en-paragraph:true;">的气球将整个气球序列分成两部分，在击破</span><span style="letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); font-size: 18px; font-family: &quot;Helvetica Neue&quot;; color: rgb(0, 0, 0); font-variant-caps: normal; font-variant-ligatures: normal; line-height: 23.8px;-en-paragraph:true;">k</span><span style="letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); font-size: 18px; font-family: &quot;Helvetica Neue&quot;; color: rgb(0, 0, 0); font-variant-caps: normal; font-variant-ligatures: normal; line-height: 23.8px;-en-paragraph:true;">之前被击破的气球，要么在</span><span style="letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); font-size: 18px; font-family: &quot;Helvetica Neue&quot;; color: rgb(0, 0, 0); font-variant-caps: normal; font-variant-ligatures: normal; line-height: 23.8px;-en-paragraph:true;">k</span><span style="letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); font-size: 18px; font-family: &quot;Helvetica Neue&quot;; color: rgb(0, 0, 0); font-variant-caps: normal; font-variant-ligatures: normal; line-height: 23.8px;-en-paragraph:true;">的左边，要么在</span><span style="letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); font-size: 18px; font-family: &quot;Helvetica Neue&quot;; color: rgb(0, 0, 0); font-variant-caps: normal; font-variant-ligatures: normal; line-height: 23.8px;-en-paragraph:true;">k</span><span style="letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); font-size: 18px; font-family: &quot;Helvetica Neue&quot;; color: rgb(0, 0, 0); font-variant-caps: normal; font-variant-ligatures: normal; line-height: 23.8px;-en-paragraph:true;">的右边，而且要保证击破所得到的分数</span><span style="letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); font-size: 18px; font-family: &quot;Helvetica Neue&quot;; color: rgb(0, 0, 0); font-variant-caps: normal; font-variant-ligatures: normal; line-height: 23.8px;-en-paragraph:true;">dp[0][n+1]</span><span style="letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); font-size: 18px; font-family: &quot;Helvetica Neue&quot;; color: rgb(0, 0, 0); font-variant-caps: normal; font-variant-ligatures: normal; line-height: 23.8px;-en-paragraph:true;">最大，上述等式可以写为：</span></div><div><span style="font-size: 18px; font-family: &quot;Helvetica Neue&quot;; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(0, 0, 0); font-variant-caps: normal; font-variant-ligatures: normal; line-height: 23.8px;-en-paragraph:true;">最终最大分数</span><span style="font-size: 18px; font-family: &quot;Helvetica Neue&quot;; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(0, 0, 0); font-variant-caps: normal; font-variant-ligatures: normal; line-height: 23.8px;-en-paragraph:true;"> </span><span style="font-size: 18px; font-family: &quot;Helvetica Neue&quot;; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(0, 0, 0); font-variant-caps: normal; font-variant-ligatures: normal; line-height: 23.8px;-en-paragraph:true;">= dp[0][n+1] = num[k]*num[0]*num[n+1] + </span><span style="font-size: 18px; font-family: &quot;Helvetica Neue&quot;; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(0, 0, 0); font-variant-caps: normal; font-variant-ligatures: normal; line-height: 23.8px;-en-paragraph:true;">击破所有</span><span style="font-size: 18px; font-family: &quot;Helvetica Neue&quot;; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(0, 0, 0); font-variant-caps: normal; font-variant-ligatures: normal; line-height: 23.8px;-en-paragraph:true;">k</span><span style="font-size: 18px; font-family: &quot;Helvetica Neue&quot;; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(0, 0, 0); font-variant-caps: normal; font-variant-ligatures: normal; line-height: 23.8px;-en-paragraph:true;">左边的气球的分数的最大值</span><span style="font-size: 18px; font-family: &quot;Helvetica Neue&quot;; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(0, 0, 0); font-variant-caps: normal; font-variant-ligatures: normal; line-height: 23.8px;-en-paragraph:true;"> + </span><span style="font-size: 18px; font-family: &quot;Helvetica Neue&quot;; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(0, 0, 0); font-variant-caps: normal; font-variant-ligatures: normal; line-height: 23.8px;-en-paragraph:true;">击破所有</span><span style="font-size: 18px; font-family: &quot;Helvetica Neue&quot;; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(0, 0, 0); font-variant-caps: normal; font-variant-ligatures: normal; line-height: 23.8px;-en-paragraph:true;">k</span><span style="font-size: 18px; font-family: &quot;Helvetica Neue&quot;; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(0, 0, 0); font-variant-caps: normal; font-variant-ligatures: normal; line-height: 23.8px;-en-paragraph:true;">右边的气球的分数的最大值</span><span style="font-size: 18px; font-family: &quot;Helvetica Neue&quot;; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(0, 0, 0); font-variant-caps: normal; font-variant-ligatures: normal; line-height: 23.8px;-en-paragraph:true;"> </span><span style="font-size: 18px; font-family: &quot;Helvetica Neue&quot;; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(0, 0, 0); font-variant-caps: normal; font-variant-ligatures: normal; line-height: 23.8px;-en-paragraph:true;">= num[k]*num[0]*num[n+1] + dp[0][k] + dp[k][n+1] , </span><span style="font-size: 18px; font-family: &quot;Helvetica Neue&quot;; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(0, 0, 0); font-variant-caps: normal; font-variant-ligatures: normal; line-height: 23.8px;-en-paragraph:true;">所以这个等式就被推导出来了</span></div><div><br/></div><div style="orphans: 2; widows: 2;"><span style="orphans: 2; widows: 2;">确定思路后就可以填充dp[][]二维矩阵了。</span></div><div style="orphans: 2; widows: 2;"><span style="orphans: 2; widows: 2;">该二维矩阵特点：</span></div><ol><li><div style="orphans: 2; widows: 2;"><span style="orphans: 2; widows: 2;">dp[i][j] ，不用填充 i &lt; =j 的情形</span></div></li><li><div style="orphans: 2; widows: 2;"><span style="orphans: 2; widows: 2;">填充路径为左上至右下方向</span></div></li></ol><div style="orphans: 2; widows: 2;"><span style="orphans: 2; widows: 2;">为了直观感受，我画了一个当n=4时的填充dp矩阵的图片，红色箭头为填充dp矩阵的方向，起点为dp[0][2]，终点为dp[0][5]，也就是要求的答案</span></div><div style="orphans: 2; widows: 2;"><br/></div><div style="orphans: 2; widows: 2;"><br/></div><div style="orphans: 2; widows: 2;"><img src="Leetcode%20312.%20Burst%20Balloons.resources/screenshot.png" height="1122" width="1160"/></div><div><br/></div><div><br/></div><div><span style="font-size: 18px; color: rgb(33, 33, 33); font-family: &quot;Helvetica Neue&quot;;">其中每个单元格，也就是dp[i][j] = </span><span style="font-size: 18px; color: rgb(33, 33, 33); font-family: &quot;Helvetica Neue&quot;;">max(num[k]*num[i]*num[j] + dp[i][k] + dp[k][j]) , i&lt;k&lt;j，就可以计算出来了。整个算法复杂度O（n ^3）</span></div></body></html>